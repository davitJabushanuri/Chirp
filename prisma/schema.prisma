generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// twitter user model
model User {
  id                    Int      @id @default(autoincrement())
  name                  String
  screen_name           String
  location              String?
  url                   String?
  description           String?
  protected             Boolean?
  verified              Boolean?
  followers_count       Int      @default(0)
  friends_count         Int      @default(0)
  favorites_count       Int      @default(0)
  statuses_count        Int      @default(0)
  profile_banner_url    String?
  profile_image_url     String?
  default_profile       Boolean  @default(false)
  default_profile_image Boolean  @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  tweets    Tweet[]
}

// twitter tweet model
model Tweet {
  id                      Int     @id @default(autoincrement())
  text                    String?
  source                  String  @default("web")
  in_reply_to_status_id   Int?
  in_reply_to_user_id     Int?
  in_reply_to_screen_name String?

  user_id        Int
  user           User        @relation(fields: [user_id], references: [id])
  coordinates_id String?
  coordinates    Coordinate? @relation(fields: [coordinates_id], references: [id])
  place_id       String?
  place          Place?      @relation(fields: [place_id], references: [id])

  quoted_status_id Int?
  is_quote_status  Boolean @default(false)

  quote_count    Int @default(0)
  reply_count    Int @default(0)
  retweet_count  Int @default(0)
  favorite_count Int @default(0)

  possibly_sensitive Boolean? @default(false)
  lang               String   @default("en")

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// twitter coordinates model
model Coordinate {
  id        String  @id @default(uuid())
  longitude Float
  latitude  Float
  tweets    Tweet[]
}

// twitter place model
model Place {
  id           String  @id @default(uuid())
  url          String?
  place_type   String?
  name         String?
  full_name    String?
  country_code String?
  country      String?
  tweets       Tweet[]
}
